<ion-header>
  <ion-toolbar>
    <ion-title>
      {{isDesktop() ? 'Who wants to be a millionaire?' : 'Millionaire'}}
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-alert
  [isOpen]="isAlertOpen"
  css-class="cssalert"
  header="{{prizesList[level]}}"
>
</ion-alert>
<ion-content [fullscreen]="true">
  <ion-grid>
    <ion-row>
      <ng-container *ngIf="networkError">
        <ion-header>
          <ion-toolbar>
            <ion-row>
              <ion-title color="warning">
                <ion-col>
                  <ion-icon name="cloud-offline-outline" size="large"></ion-icon>
                </ion-col>
                <ion-col>Network connection error has occured.</ion-col>
              </ion-title>
            </ion-row>
          </ion-toolbar>
        </ion-header>
      </ng-container>
      <ion-col *ngIf="isDesktop()" size="{{isDesktop() ? '2' : ''}}"></ion-col>
      <ion-col *ngIf="level===0 && !startBtnClicked " size="{{isDesktop() ? '8' : ''}}">
        <ion-card>
          <ion-row *ngIf="level===0 && !startBtnClicked">
            <ion-col *ngIf="isDesktop()" size="4"></ion-col>
            <ion-col size="{{isDesktop() ? '4' : ''}}">
              <ion-img
                src="././assets/millionaire.png"
                style="width: auto">
              </ion-img>
              <ion-col></ion-col>
              <ion-action-sheet
                (didDismiss)="logResult($event)"
                [buttons]="topicActionSheetButtons"
                header="{{'Topic: ' + questionTopic }}"
                isOpen='{{showTopicActionSheet}}'
              ></ion-action-sheet>
              <ion-action-sheet
                (didDismiss)="logResult($event)"
                [buttons]="difficultyActionSheetButtons"
                header="{{'Difficulty: ' + questionDifficulty }}"
                isOpen='{{showDifficultyActionSheet}}'
              ></ion-action-sheet>
              <ion-card>
                <ion-card-header>
                  <ion-button (click)="startQuiz()" *ngIf="level===0 && !startBtnClicked && networkError ==='' "
                              id="startBtn">START
                  </ion-button>
                  <ion-button (click)="!showTopicActionSheet ? showTopicActionSheet = true : ''"
                              *ngIf="level===0 && !startBtnClicked && networkError ==='' ">SELECT TOPIC
                  </ion-button>
                  <ion-button (click)="!showDifficultyActionSheet ? showDifficultyActionSheet = true : ''"
                              *ngIf="level===0 && !startBtnClicked && networkError ==='' ">SELECT
                    DIFFICULTY
                  </ion-button>
                </ion-card-header>
              </ion-card>
            </ion-col>
            <ion-col *ngIf="isDesktop()" size="4"></ion-col>
          </ion-row>
        </ion-card>
      </ion-col>
      <ion-col *ngIf="quizList[level] && startBtnClicked">
        <ion-card style="--ion-text-color: #3880ff;">
          <ion-card-title style="{{'background: border-radius: 5px;'}}">
            <ion-card
              [ngStyle]="{'background': quizList[level].value === 'CONGRATULATIONS!!! YOU ARE A MILLIONAIRE!! YOU JUST WON '+ this.prizesList[14] + '!!!' ? 'orange' : ''}"
              color="primary">
              <ion-card-header>
                <ion-card-title style="text-align: center">{{quizList[level]?.value }}</ion-card-title>
              </ion-card-header>
              <ion-card-content></ion-card-content>
            </ion-card>
          </ion-card-title>
          <ion-card-subtitle>
          </ion-card-subtitle>
          <ion-radio-group *ngIf=" questionTopic !== '' && questionDifficulty !== '' && startBtnClicked "
                           value="questions">
            <ion-card-content>
              <ion-item *ngFor="let item of quizList[level]?.answers"
                        [ngStyle]="{ '--background': !active && selectedAnswer === item  ? '#eb445a' : ''}"
                        class="item-text-wrap"
                        style="{{!active && item === quizList[level]?.correct_answer ? '--background: #006600' : '' }}">
                <ion-col *ngIf="usePhone && item === quizList[level]?.correct_answer ">
                  <ion-icon name="call"></ion-icon>
                </ion-col>
                <ion-badge *ngIf="Object.keys(statDict).length"
                           slot="start">{{  getStat(item).toString().length < 2 ? getStat(item) + " % " : getStat(item) + "%" }}</ion-badge>
                <ion-radio (click)="selectAnswer($event)" justify="space-between" value="{{item}}"><span
                  class="ion-text-wrap">{{item}}</span>
                </ion-radio>
                <br/>
              </ion-item>
            </ion-card-content>
            <ion-card-content>
              <ion-row>
                <ion-col size="{{isDesktop() ? '' : '8'  }}">

                  <ion-button (click)="halving()"
                              *ngIf=" quizList[level].value !== 'Fail' && quizList[level].value !== 'CONGRATULATIONS!!! YOU ARE A MILLIONAIRE!! YOU JUST WON '+ this.prizesList[14] + '!!!'"
                              [ngStyle]="{'--background': help_modules['halving'] ? '#3880ff' : 'red' }"
                              class="ion-align-self-end"
                              disabled="{{!active || !help_modules['halving']}}"
                              matTooltip="{{ getTooltip('halving') }}"
                              matTooltipPosition="above" size="small"
                              style="{{isDesktop() ? 'width: 25%;' : 'width: 30%;'}}"
                  >50:50
                  </ion-button>


                  <ion-button (click)="phone()"
                              *ngIf=" quizList[level].value !== 'Fail' && quizList[level].value !== 'CONGRATULATIONS!!! YOU ARE A MILLIONAIRE!! YOU JUST WON '+ this.prizesList[14] + '!!!'"
                              [ngStyle]="{'--background': help_modules['phone'] ? '#3880ff' : 'red' }"
                              class="ion-align-self-end"
                              disabled="{{!active || !help_modules['phone']}}"
                              matTooltip="{{ getTooltip('phone') }}"
                              matTooltipPosition="above"
                              size="small"
                              style="{{isDesktop() ? 'width: 25%;' : 'width: 30%;'}}"
                  >
                    <ion-icon name="call"></ion-icon>
                  </ion-button>
                  <ion-button (click)="audience()"
                              *ngIf=" quizList[level].value !== 'Fail' && quizList[level].value !== 'CONGRATULATIONS!!! YOU ARE A MILLIONAIRE!! YOU JUST WON '+ this.prizesList[14] + '!!!'"
                              [ngStyle]="{'--background': help_modules['audience'] ? '#3880ff' : 'red'}"
                              class="ion-align-self-end"
                              disabled="{{!active || !help_modules['audience']}}"
                              matTooltip="{{ getTooltip('audience') }}"
                              matTooltipPosition="above"
                              size="small"
                              style="{{isDesktop() ? 'width: 25%;' : 'width: 30%;'}}"
                  >
                    <ion-icon name="person"></ion-icon>
                    <ion-icon name="person"></ion-icon>
                    <ion-icon name="person"></ion-icon>
                  </ion-button>
                </ion-col>
                <ion-col *ngIf="isDesktop()" size='6'></ion-col>
                <ion-col size="{{isDesktop() ? '' : '4'  }}">
                  <ion-button (click)="checkAnswer(selectedAnswer)"
                              *ngIf=" quizList[level]?.value !== 'Fail' && quizList[level]?.value !== 'CONGRATULATIONS!!! YOU ARE A MILLIONAIRE!! YOU JUST WON '+ this.prizesList[14] + '!!!' && active"
                              size="small"
                              style="width: 100%; display: inline-block;">Next
                  </ion-button>
                </ion-col>
              </ion-row>
            </ion-card-content>
          </ion-radio-group>
          <ion-card-content
            *ngIf=" !active && quizList[level] || quizList[level]?.value === 'CONGRATULATIONS!!! YOU ARE A MILLIONAIRE!! YOU JUST WON '+ this.prizesList[14] + '!!!' || networkError !=='';">
            <ion-button (click)="reloadPage()" class="n-submit" style="width: 100%; display:inline-block;">Try Again
            </ion-button>
          </ion-card-content>
        </ion-card>
      </ion-col>
      <ion-col *ngIf="isDesktop()" size="2"></ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
